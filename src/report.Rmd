---
title: "Report"
author: "Amy Goldlist, Maud Boucherit, Tyler Roberts"
date: "April 16, 2018"
output:
  html_document: 
    keep_md: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


```

```{r loading, include = FALSE}
## load libraries
library(tidyverse)
library(scales)
library(cowplot)  ### maybe try a different one?
 
## load in data
dat <- read.csv("../results/clean_data.csv")


#dat$desert_island <- factor(dat$desert_island, levels=rev(levels(dat$desert_island)))

## I'm manually making Star Trek be number 2.
dat$desert_island <- factor(dat$desert_island, levels=c("neither", "Star Wars", "Star Trek"))
```



## Introduction

The series "Star Wars" and "Star Trek" attract a lot of comparisons, possibly because they both start with the word "Star".  In our personal experience, we feel that the geekier a person identifies as, the more strongly they feel about this question.  In order to explore this, we created a survey to gather data about the subject that we can then analyse.  After looking at the data, we explored a model that we like to call the "rare disease" model, in which we posit that while preferring Star Trek is in the minority across all categories, being geekier increases the odds of choosing Star Trek over other alternatives.  We borrowed the methodology from statistical methods developed for studying relatively rare diseases, hence the name.  In this vein, we will use mosaic plots to explore the data and log odds ratios as an analytical tool.

## Methodology

We collected data using an [online survey](https://goo.gl/forms/Jb3pCN6GVhqziVvt1) asking users about their familiarity and knowledge of both series, as well as some basic demographic information and how geeky they consider themselves.  The online nature was chosen for convenience, and as a criterion of this project's instructions.  We know that our method of choosing respondents is non-random, and we hoped that we would be able to compensate that in our analysis.

### Survey Study Design

The main question we were concerned with was whether a person's choice of Star Wars or Star Trek is correlated with their self-reported geekiness.  In order to tease out whether the choice has to do with how familiar they are with the series, we also asked respondents to rank their knowledge of the series' universe on a traditional Likert scale from 1 to 5.  We added a separate skill-testing question to differentiate if the knowledge's 5s were true experts.  Finally, the main response question asks respondents which series they would prefer if stuck on a desert island.  We call this their "desert island choice".

Our main explanatory variable is "Geekiness", and it was measured on a 5 point Likert scale.  We decided to omit a definition of geekiness because we believe that people's intrinsic understanding of the term is inherently tied to how they rank themselves.  This was a deliberate choice because we have no objective way to truly assess people's level of geekiness. Therefore, we will refer to this variable as the "self-reported geekiness".  

In order to adjust for possible confounders introduced by the nature of the survey, we asked basic demographic questions such as age, gender, employment sector, continent, and whether they were an MDS student.  We chose 10-year ranges for the age to protect the anonymity of our respondents.  We deliberately asked for gender identification with many options, in order not to conform to outdated gender norms.  However, we did merge our results into "male", "female", and "other" for better analysis.  For location, we chose to ask about the continent they most identified with to allow people who have lived in multiple locations to decide which was most important to their identity.

Finally, we used humour in our questions to keep respondents engaged and forwarding the survey.  We understand that this is not everybody's preference, but we ended up with a significantly larger sample than we had planned (around 180 respondents vs an estimated 45).  We were able to gather data for a large variety of age and continent.


### Data Collection Methods

We collected data by distributing an online survey.  We shared the survey through three main channels:

- 1 All UBC MDS students completed the survey during the designated class time

- 2 We sent the survey to all Ensai (National School of Statistics and Data Analysis) students.  Since this program is in France, we hoped to get a more multicultural sample.

- 3 We posted it on Facebook and let Facebook's algorithm share as it would.  In order to get it to the top of Facebook feeds, we attempted to game their algorithm using the following text: "She said yes! It's twins!!! Here's one little trick, Congrats!! (now that I've hopefully gamed the algorithm enough to get to the top of your feed). Feel like filling out a survey? I promise not to steal your data, and you'd be having fun and helping me with a project."  

This method of sampling falls squarely under the header of "convenience sampling", and our sample is skewed towards the tech community.  

### Aspects of Ethics

After reading the UBC ethics code, we feel that our survey has no sensitive information, and we will not ask any personally identifying questions.  To this end, we will have the respondent choose from 10-year ranges for their age.  Because of this, we feel confident enough to use Google forms as a vehicle.  As per UBC policy, we will have a paragraph (copied verbatim from the UBC page for legal reasons) informing the respondent that the information will be stored in a US server subject to homeland security, and have them click to acknowledge this:

> "This online survey company is hosted by a web survey company located in the USA (Google) and as such is subject to U.S. laws, in particular, the US Patriot Act which allows authorities access to the records of internet service providers. If you choose to participate in the survey, you understand that your responses to the survey questions will be stored and accessed in the USA. The security and privacy policy for Google can be found at the following link: https://policies.google.com/"


### The Survey

Below is the complete survey, including the images we displayed:

#### Self-Identified Geekiness
- How would you rate your degree of geekiness?
    - From (1) not geeky at all to (5) super geeky

#### Star Wars-related
![](../images/sw_logo.png)
- How would you rate your degree of fandom?
    - From (1) I hate it! to (5) I even love the prequels!
- How would you rate your degree of knowledge about the Star Wars universe?
    - From (1) no knowledge at all to (5) expert knowledge
    - If rated 5: People are redirected to a hardcore question about Star Wars:
        > Who first uttered the line "It's a trap!" and in what film?

#### Star Trek-related
![](../images/st_logo.png)


- How would you rate your degree of fandom?
    - From (1) I hate it! to (5) I even love Wrath of Khan!
- How would you rate your degree of knowledge about the Star Trek universe?
    - From (1) no knowledge at all to (5) expert knowledge
    - If rated 5: People are redirected to a hardcore question about Star Trek:
        > According to Klingon mythology, what is the place where all life began?

#### Star Wars Vs. Star Trek
![](../images/sw_vs_st.png)

- Overall, are you more familiar with Star Wars or Star Trek universe?
    - Answers are: Star Wars, Star Trek, Both, Neither
- You're stuck on a deserted island, with a TV and only one complete set of movies/TV episodes/books/games to entertain you for the rest of your life.  Which do you choose?
    - Answers are: Star Wars, Star Trek, Neither: I will stare at the sand for the rest of my life rather than choose a quality science fiction series to watch.

#### Confounding Variables
- What is your age?
    - Below 20, In my 20s, In my 30s, In my 40s, 50 or older
- What is your gender?
    - Female, Male, Non-binary, Prefer not to say, Other…
- Which continent would you identify yourself with?
    - North America, South America, Asia, Europe, Africa, Oceania, Antarctica
- What is the main sector of your job/education background?
    - Tech, Finance/Economics/Business, A, ministration/Education, Biology/Medicine, Chemistry/Physics, Math/Statistics, Other…
- Are you currently enrolled in the MDS program at UBC?


### Analysis Methods 

[**this is very rough and totally needs work**]
We decided to incorporate confounding variables gender, age, continent and sector of activity because we want to have information about who answered our survey so we can identify any possible bias in the sample. We suspected that most younger people would prefer Star Wars over Star Trek, because of when when these series were released, and the video quality of the original releases. We also suspected that people in the tech industry or sciences would be likely to have a high geekiness score, as well as an affinity for at least one of the two sci-fi series. We included gender and continent as well, because, while we didn't have any particular hypotheses about these factors, we wanted to ensure that we were able to capture any effect that they mightve had, and controlled for it in our experiment. [**Add more, probably**]

We planned to look at relationships between our response and explanatory variables and to model the effect of these confounding variables to decrease any bias. To do so, we want to stratify our survey's answers according to a propensity score. The response we were most interested in was the respondent's choice in sci-fi series if they were stranded on a desert island. We felt that posing the question in this way would encourage even those respondent's who did not particularly enjoy either series to make a decision between the two, at the risk of being bored for all eternity.

Methods we explored are logistic regressions, both binomial, ordinal and multinomial, and propensity score matching.

Since we were asking subjective questions, we chose to use Likert scales for many variables.  Dealing with Likert scales can be difficult as ordinal data can be both categorical or quantitative data depending on the analysis used.  In our research, we found that there is no clear consensus as to how to treat such data in the analysis.  In recent years, there have been more arguments in favour of using parametric methods to deal with ordinal data, particularly when several Likert scale questions are grouped to give a more balanced score.  To this end, we have aggregated the questions regarding each series into a scoring metric for each series, and used conventional methods to analyse the data with these scores.


**EXPAND THIS PART!!!**

## Analysis and Results 


### Exploratory Data Analysis

If you would like to see the R code to produce these plots, please see [this Rscript](../src/image_ag.R). [**If the images end up here, we can direct this to the Rmd file**]  As part of our analysis, we looked at relationships between our response and explanatory/confounding variables.  Here are some highlights of that analysis.  All of the analysis below is based on a sample of [**174, OR MORE??**] respondents to our survey.  


#### Geekiness and Desert Island Choice

The focus of our analysis is the effect of geekiness on the variable we have called "Desert Island Choice".  

```{r}

dat %>% 
    ggplot(aes(fill = desert_island, x = geeky)) +
    geom_bar()+
    facet_wrap(~desert_island) +
    theme_bw() + 
    scale_fill_manual(values = c("firebrick3", "darkgoldenrod2", "dodgerblue3")) +
    guides(fill = FALSE) +
    labs(title = "Desert Island Picks by Self-Identified Geekiness", y="Count", x="Self-Identified Geekiness")

```

These plots show the distribution of self-identified geekiness faceted by the respondent's choice in series to have on a desert island.

Unsurprisingly, those who chose neither, generally rated themselves lower on the geekiness scale: nearly 40% of such respondents rated themselves 1 or 2 out of 5, although the mode is 3. It is surprising that at least one person who rated themselves  5/5 in geekiness chose to watch neither of the series if stuck for eternity on a desert island.

Over 50% of those who chose Star Wars rated themselves a 3/5 on the geekiness scale. The distribution seems to be left-skewed, with more people in this group rating themselves 4 than those rating themselves 2.

The mode of the Star Trek distribution is 4, unlike the other two groups. This might suggest that on average people who prefer Star Trek are geekier or at least consider themselves to be geeks more often. We could formalise this by measuring the kurtosis in these distributions.

This is where we will focus our attention during our analysis, in explaining the differing shapes of these distributions.

```{r}
### try number 3:
dat %>% 
    #filter(continent %in% c("North America", "Europe", "Asia")) %>% 
    ggplot(aes(fill = desert_island, x = geeky)) +
      theme_bw() +
      geom_bar(position = "fill") +
      scale_fill_manual(values = c("firebrick3", "darkgoldenrod2", "dodgerblue3")) +
      coord_flip() + 
      #scale_fill_brewer(palette = "Dark2") +
      guides(fill=guide_legend(title="Desert Island Choice")) +
      labs(title="Desert Island Proportion by Geekiness", x="Geekiness", y="Proportion Selected")

```
As we can see on the above mosaic plot, the proportion of those choosing Star Trek appears to be increasing as geekiness increases.

```{r}
### but what if we get rid of the neithers?

dat %>% 
    filter(desert_island != "neither") %>% 
    ggplot(aes(fill = desert_island, x = geeky)) +
      theme_bw() +
      geom_bar(position = "fill") +
      scale_fill_manual(values = c("darkgoldenrod2", "dodgerblue3")) +
      coord_flip() + 
      #scale_fill_brewer(palette = "Dark2") +
      guides(fill=guide_legend(title="Continent")) +
      labs(title="Desert Island Proportion by Geekiness", x="Geekiness", y="Proportion Selected")


### or what if we group stuff? -- I think the first plot works better, we can use it to make an comment about
dat %>% 
    filter(desert_island != "neither") %>% 
    mutate(geeky = ifelse(geeky %in% c(1,2), "not geeky", ifelse(geeky %in% c(4,5),"geeky", "neutral"))) %>% 
    ggplot(aes(fill = desert_island, x = geeky)) +
      theme_bw() +
      geom_bar(position = "fill") +
      scale_fill_manual(values = c("darkgoldenrod2", "dodgerblue3")) +
      coord_flip() + 
      #scale_fill_brewer(palette = "Dark2") +
      guides(fill=guide_legend(title="Continent")) +
      labs(title="Desert Island Proportion by Geekiness", x="Geekiness", y="Proportion Selected")

### This shows no effect.  So, not super interesting


```

**Notes to Maud and Tyler: Is this really increasing?  I'm not sure we can say more than it's less popular amond the 1s....**

Though theses plots don't seem to show a clear trend, we posit that this is due to the confounding variables and the uneven sample sizes which can't be seen on this plot. At the very least, it appears that those who rated themselves a 1 in geekiness choose Star Trek less frequently.


#### Age and Desert Island Choice

An important confounding variable is age.  As we can see from the mosaic plot below, there is a clear effect of age on both desert island choice and geekiness.

```{r Age-desert-island, echo = FALSE}
 p3 <- subset(dat, !is.na(age)) %>% 
    ggplot(aes(x = desert_island, fill = factor(age, level = rev(levels(factor(age)))))) + 
      geom_bar(position = "fill", colour = "black") +
      theme_bw() +
      #scale_y_continuous("Age", minor_breaks = NULL,  
       #                  breaks = c(0, 0.036, 0.735, 0.908, 0.977), 
        #                 labels = c(0, 20, 30, 40, 50)) +
      coord_flip() + 
      scale_fill_brewer(labels=c("Less than 20", "20 to 30", "30 to 40", "40 to 50", "Greater than 50"), palette = "Dark2") +
      guides(fill=guide_legend(title="Age Group")) +
      labs(title="Desert Island Picks by Age", x="Desert Island Choice", y="Proportion Selected")

###  This may not be the correct graph, but here goes:

age_geekiness <- subset(dat, !is.na(age)) %>% 
    ggplot(aes(x = geeky, fill = factor(age, level = rev(levels(factor(age)))))) + 
      geom_bar(position = "fill", colour = "black") +
      theme_bw() +
      #scale_y_continuous("Age", minor_breaks = NULL,  
       #                  breaks = c(0, 0.036, 0.735, 0.908, 0.977), 
        #                 labels = c(0, 20, 30, 40, 50)) +
      coord_flip() + 
      scale_fill_brewer(labels=c("Less than 20", "20 to 30", "30 to 40", "40 to 50", "Greater than 50"), palette = "Dark2") +
      guides(fill=guide_legend(title="Age Group")) +
      labs(title="Geekiness Picks by Age", x="Geekiness", y="Proportion Selected")

legend <- get_legend(p3)

### THis is an experiment! -- I think the two greens is a little confusing.
cowplot::plot_grid(p3+ theme(legend.position="none"), 
                   age_geekiness+ theme(legend.position="none"),
                   rel_widths = c(1,1,.3),
                   #align = "h",
                   ncol = 3,
                   legend)

### THis is worse!!
cowplot::plot_grid(p3+ theme(legend.position="none"), 
                   age_geekiness,
                   rel_widths = c(2,3),
                   #align = "h",
                   ncol = 3)


```

The above figure breaks down each age group's choice of series. Since the 20-30 age group is by far the largest group of respondents to this survey, they dominate each of the three choices. That being said, they seem to make up fewer of those who would choose Star Trek, decreasing by roughly the same amount that the 30-40 group increased for this choice.

While the "Less than 20" group is one of the smallest, they have a larger than usual proportion among those who chose neither.

Finally, *nobody* among the 40-50 group chose neither.

Given these results, we feel that it is prudent to include age as a confounding variable in our analysis.


#### Continent and Desert Island Choice

When we looked at the continent, we found a clear trend that Star Trek is more popular in North America than in the other continents.  Our working theory is that Star Trek was mostly an American trend, and never really caught on in Asia or Europe

```{r}
  # Response by continent
  p4 <- dat %>% 
    filter(continent %in% c("North America", "Europe", "Asia")) %>% 
    ggplot(aes(x = desert_island, fill = continent)) +
      theme_bw() +
      geom_bar(position = "fill", colour = "black") +
      #scale_y_continuous("Continent (most identified)", minor_breaks = NULL,  
       #                  breaks = c(0.125, 0.58, 0.95), 
        #                 labels = c("North America", "Europe", "Asia")) +
      coord_flip() + 
      scale_fill_brewer(palette = "Dark2") +
      guides(fill=guide_legend(title="Continent")) +
      labs(title="Desert Island Proportion by Continent", x="Desert Island Choice", y="Proportion Selected")

p4


```

The above plot breaks down each continent's choice of series if they were stuck on a desert island.  Most people who chose Star Trek as their preferred series were located in North America, while Star Wars fans are highly concentrated in Europe relative to the other regions. Asia had the highest proportion of people who would prefer neither series. 

When looking at these results, it is important to keep in mind that this plot does not capture the differences in total number of people who selected each series. So while most of the people who chose Star Trek identify as North Americans, the absolute number of these people is still lower than those from North America who chose Star Wars, and so on.

Given this effect, continent is another confounder that we included in our analysis.

```{r}
##let's try this in reverse...  I think it'll be interesting:


dat %>% 
    filter(continent %in% c("North America", "Europe", "Asia")) %>% 
    ggplot(aes(fill = desert_island, x = continent)) +
      theme_bw() +
      geom_bar(position = "fill", colour = "black") +               
      labels = c("North America", "Europe", "Asia") +
      coord_flip() + 
      scale_fill_manual(values = c("firebrick3", "darkgoldenrod2", "dodgerblue3")) +
      guides(fill=guide_legend(title="Desert Island Choice")) +
      labs(title="Desert Proportion by Continent", x="Continent", y="Proportion Selected")

```



#### Familiarity and Desert Island Choice

**Here I think we should use Maud's combined score**

```{r desert_island-familiarity, echo = FALSE}

 # Bar plot of desert_island by familiarity
p1 <- dat %>% 
    ggplot(aes(x = desert_island, fill = familiar)) +
    geom_bar(colour = "black") +
    theme_bw() +
    scale_fill_manual(values = c("darkolivegreen3", "dodgerblue3", "darkgoldenrod2", "firebrick3")) +
    guides(fill=guide_legend(title="Most Familiar With")) +
    labs(title = "Desert Island Picks by Familiarity", y="Count", x="Desert Island Choice")

p1
```

It makes intuitive sense that a person's familiarity with various series would influence their choice of series, and indeed it seems to be so.

An interesting result from the above plot is that very few people who are most familiar with Star Trek chose Star Wars as their desert island series, whereas a large number of those who were more familiar with Star Wars chose Star Trek. However, those who reported being equally familiar with both seemed evenly split between the two groups. 

Those who were not familiar with either series were mostly the ones who chose neither on a desert island, and there were *zero* of those who were most familiar with Star Trek in that category.  Familiarity is another confounder which we choose to include in our analysis.


## discussion of Results

## discussion of  survey/study design

In our original survey, we did not leave a space for "the arts" underemployment sector.  As a result, we had a lot of write-in "other" categories, thus making analysis difficult. We also chose to narrow our focus to Star Trek vs Star Wars and not to include other science fiction series such as _Doctor Who_.  This did annoy some of our respondents who did not want to choose.  Also, some respondents felt that we should have dealt with the _geek_ vs _nerd_ dichotomy, which is not something we have an opinion on. But apparently, people do.

**expand**
